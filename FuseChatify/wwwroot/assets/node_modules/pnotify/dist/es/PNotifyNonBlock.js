import PNotify from"./PNotify.js";const regexOn=/^on/,regexMouseEvents=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/,regexUiEvents=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/,regexHtmlEvents=/^(scroll|resize|(un)?load|abort|error)$/,domEvent=(t,e,o)=>{let n;if(e=e.toLowerCase(),document.createEvent&&t.dispatchEvent){if((e=e.replace(regexOn,"")).match(regexMouseEvents)?(t.getBoundingClientRect(),(n=document.createEvent("MouseEvents")).initMouseEvent(e,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget)):e.match(regexUiEvents)?(n=document.createEvent("UIEvents")).initUIEvent(e,o.bubbles,o.cancelable,o.view,o.detail):e.match(regexHtmlEvents)&&(n=document.createEvent("HTMLEvents")).initEvent(e,o.bubbles,o.cancelable),!n)return;t.dispatchEvent(n)}else e.match(regexOn)||(e="on"+e),n=document.createEventObject(o),t.fireEvent(e,n)};let nonBlockLastElem;function data(){return Object.assign({_notice:null,_options:{}},PNotify.modules.NonBlock.defaults)}var methods={initModule(t){this.set(t)}};function oncreate(){const t=[],e=(e,o,n)=>{const s=document.elementFromPoint(o.clientX,o.clientY);e.refs.elem.classList.add("ui-pnotify-nonblock-hide");const i=document.elementFromPoint(o.clientX,o.clientY);e.refs.elem.classList.remove("ui-pnotify-nonblock-hide");const r=window.getComputedStyle(i).cursor;(e=>{for(let o=0;o<t.length;o++)if(t[o].elem===e)return;t.push({elem:e,cursorStyleValue:e.style.getPropertyValue("cursor"),cursorStylePriority:e.style.getPropertyPriority("cursor")})})(s),s.style.setProperty("cursor","auto"===r?"default":r,"important"),nonBlockLastElem&&nonBlockLastElem==i||(nonBlockLastElem&&(domEvent(nonBlockLastElem,"mouseleave",o),domEvent(nonBlockLastElem,"mouseout",o)),domEvent(i,"mouseenter",o),domEvent(i,"mouseover",o)),domEvent(i,n,o),nonBlockLastElem=i},o=this.get("_notice");o.on("mouseenter",t=>{this.get("nonblock")&&t.stopPropagation&&(t.stopPropagation(),o.addModuleClass("ui-pnotify-nonblock-fade"))}),o.on("mouseleave",e=>{this.get("nonblock")&&e.stopPropagation&&e.stopPropagation(),nonBlockLastElem=null,(()=>{for(let e=0;e<t.length;e++)t[e].elem.style.setProperty("cursor",t[e].cursorStyleValue,t[e].cursorStylePriority);t.length=0})(),this.get("nonblock")&&o.removeModuleClass("ui-pnotify-nonblock-fade")}),o.on("mouseover",t=>{this.get("nonblock")&&t.stopPropagation&&t.stopPropagation()}),o.on("mouseout",t=>{this.get("nonblock")&&t.stopPropagation&&t.stopPropagation()}),o.on("mousemove",t=>{this.get("nonblock")&&t.stopPropagation&&(t.stopPropagation(),e(o,t,"onmousemove"))}),o.on("mousedown",t=>{this.get("nonblock")&&t.stopPropagation&&(t.stopPropagation(),t.preventDefault(),e(o,t,"onmousedown"))}),o.on("mouseup",t=>{this.get("nonblock")&&t.stopPropagation&&(t.stopPropagation(),t.preventDefault(),e(o,t,"onmouseup"))}),o.on("click",t=>{this.get("nonblock")&&t.stopPropagation&&(t.stopPropagation(),e(o,t,"onclick"))}),o.on("dblclick",t=>{this.get("nonblock")&&t.stopPropagation&&(t.stopPropagation(),e(o,t,"ondblclick"))})}function setup(t){t.key="NonBlock",t.defaults={nonblock:!1},t.init=(e=>new t({target:document.body,data:{_notice:e}})),PNotify.modules.NonBlock=t}function add_css(){var t=createElement("style");t.id="svelte-862694281-style",t.textContent="[ui-pnotify].ui-pnotify.ui-pnotify-nonblock-fade{opacity:.2 !important}[ui-pnotify].ui-pnotify.ui-pnotify-nonblock-hide{display:none !important}",appendNode(t,document.head)}function create_main_fragment(t,e){return{c:noop,m:noop,p:noop,u:noop,d:noop}}function PNotifyNonBlock(t){init(this,t),this._state=assign(data(),t.data),document.getElementById("svelte-862694281-style")||add_css();var e=oncreate.bind(this);t.root||(this._oncreate=[]),this._fragment=create_main_fragment(this._state,this),this.root._oncreate.push(e),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),callAll(this._oncreate))}function createElement(t){return document.createElement(t)}function appendNode(t,e){e.appendChild(t)}function noop(){}function init(t,e){t._observers={pre:blankObject(),post:blankObject()},t._handlers=blankObject(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function assign(t){for(var e,o,n=1,s=arguments.length;n<s;n++)for(e in o=arguments[n])t[e]=o[e];return t}function callAll(t){for(;t&&t.length;)t.shift()()}function destroy(t){this.destroy=noop,this.fire("destroy"),this.set=this.get=noop,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function get(t){return t?this._state[t]:this._state}function fire(t,e){var o=t in this._handlers&&this._handlers[t].slice();if(o)for(var n=0;n<o.length;n+=1)o[n].call(this,e)}function observe(t,e,o){var n=o&&o.defer?this._observers.post:this._observers.pre;return(n[t]||(n[t]=[])).push(e),o&&!1===o.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var o=n[t].indexOf(e);~o&&n[t].splice(o,1)}}}function on(t,e){if("teardown"===t)return this.on("destroy",e);var o=this._handlers[t]||(this._handlers[t]=[]);return o.push(e),{cancel:function(){var t=o.indexOf(e);~t&&o.splice(t,1)}}}function set(t){this._set(assign({},t)),this.root._lock||(this.root._lock=!0,callAll(this.root._beforecreate),callAll(this.root._oncreate),callAll(this.root._aftercreate),this.root._lock=!1)}function _set(t){var e=this._state,o={},n=!1;for(var s in t)this._differs(t[s],e[s])&&(o[s]=n=!0);n&&(this._state=assign({},e,t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(dispatchObservers(this,this._observers.pre,o,this._state,e),this._fragment.p(o,this._state),dispatchObservers(this,this._observers.post,o,this._state,e)))}function _mount(t,e){this._fragment.m(t,e)}function _unmount(){this._fragment&&this._fragment.u()}function _differs(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function blankObject(){return Object.create(null)}function dispatchObservers(t,e,o,n,s){for(var i in e)if(o[i]){var r=n[i],a=s[i],l=e[i];if(l)for(var c=0;c<l.length;c+=1){var u=l[c];u.__calling||(u.__calling=!0,u.call(t,r,a),u.__calling=!1)}}}assign(PNotifyNonBlock.prototype,methods,{destroy:destroy,get:get,fire:fire,observe:observe,on:on,set:set,teardown:destroy,_set:_set,_mount:_mount,_unmount:_unmount,_differs:_differs}),PNotifyNonBlock.prototype._recompute=noop,setup(PNotifyNonBlock);export default PNotifyNonBlock;
//# sourceMappingURL=PNotifyNonBlock.js.map